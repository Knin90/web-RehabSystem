{% extends "admin/base_admin.html" %}
{% block title %}Dashboard - RehabSystem{% endblock %}
{% block page_title %}Panel de Administración{% endblock %}
{% block page_description %}Control y gestión integral del sistema{% endblock %}

{% block content %}
<style>
.stats-overview {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.stat-box {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 25px;
    border-radius: 12px;
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
    transition: all 0.3s ease;
    position: relative;
    overflow: hidden;
}

.stat-box::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -50%;
    width: 200%;
    height: 200%;
    background: radial-gradient(circle, rgba(255,255,255,0.1) 0%, transparent 70%);
    animation: pulse 3s ease-in-out infinite;
}

@keyframes pulse {
    0%, 100% { transform: scale(1); opacity: 0.5; }
    50% { transform: scale(1.1); opacity: 0.8; }
}

.stat-box:hover {
    transform: translateY(-5px);
    box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.stat-box.blue { background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); }
.stat-box.green { background: linear-gradient(135deg, #43e97b 0%, #38f9d7 100%); }
.stat-box.orange { background: linear-gradient(135deg, #fa709a 0%, #fee140 100%); }
.stat-box.purple { background: linear-gradient(135deg, #a8edea 0%, #fed6e3 100%); color: #333; }

.stat-icon {
    font-size: 2.5rem;
    opacity: 0.9;
    margin-bottom: 10px;
}

.stat-number {
    font-size: 2.5rem;
    font-weight: 700;
    margin: 10px 0;
}

.stat-label {
    font-size: 0.95rem;
    opacity: 0.9;
    font-weight: 500;
}

.action-cards {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
    gap: 20px;
    margin-bottom: 30px;
}

.action-card {
    background: white;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    transition: all 0.3s ease;
    cursor: pointer;
    border: 2px solid transparent;
}

.action-card:hover {
    transform: translateY(-3px);
    box-shadow: 0 5px 20px rgba(0,0,0,0.12);
    border-color: #667eea;
}

.action-card-header {
    display: flex;
    align-items: center;
    gap: 15px;
    margin-bottom: 15px;
}

.action-card-icon {
    width: 50px;
    height: 50px;
    border-radius: 10px;
    display: flex;
    align-items: center;
    justify-content: center;
    font-size: 1.5rem;
    color: white;
}

.icon-users { background: linear-gradient(135deg, #667eea, #764ba2); }
.icon-therapists { background: linear-gradient(135deg, #43e97b, #38f9d7); }
.icon-patients { background: linear-gradient(135deg, #fa709a, #fee140); }
.icon-settings { background: linear-gradient(135deg, #a8edea, #fed6e3); }
.icon-export { background: linear-gradient(135deg, #fbc2eb, #a6c1ee); }
.icon-reports { background: linear-gradient(135deg, #fdcbf1, #e6dee9); }

.action-card-title {
    font-size: 1.1rem;
    font-weight: 600;
    color: #2c3e50;
}

.action-card-desc {
    color: #6c757d;
    font-size: 0.9rem;
    line-height: 1.5;
}

.action-card-footer {
    margin-top: 15px;
    padding-top: 15px;
    border-top: 1px solid #f0f0f0;
    display: flex;
    justify-content: space-between;
    align-items: center;
}

.action-badge {
    background: #e7f3ff;
    color: #0066cc;
    padding: 4px 12px;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 500;
}

.action-arrow {
    color: #667eea;
    font-size: 1.2rem;
}

.quick-actions {
    background: white;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
    margin-bottom: 30px;
}

.quick-actions-title {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 20px;
    color: #2c3e50;
}

.quick-btn-grid {
    display: grid;
    grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));
    gap: 15px;
}

.quick-btn {
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    border: none;
    padding: 15px;
    border-radius: 10px;
    text-align: center;
    cursor: pointer;
    transition: all 0.3s ease;
    color: #2c3e50;
    font-weight: 500;
}

.quick-btn:hover {
    transform: translateY(-2px);
    box-shadow: 0 4px 15px rgba(0,0,0,0.1);
}

.quick-btn i {
    display: block;
    font-size: 1.8rem;
    margin-bottom: 8px;
    color: #667eea;
}

.chart-section {
    background: white;
    border-radius: 12px;
    padding: 25px;
    box-shadow: 0 2px 10px rgba(0,0,0,0.08);
}

.chart-title {
    font-size: 1.2rem;
    font-weight: 600;
    margin-bottom: 20px;
    color: #2c3e50;
}

[data-theme="dark"] .action-card,
[data-theme="dark"] .quick-actions,
[data-theme="dark"] .chart-section {
    background: var(--card-bg);
    color: var(--text-primary);
}

[data-theme="dark"] .action-card-title,
[data-theme="dark"] .quick-actions-title,
[data-theme="dark"] .chart-title {
    color: var(--text-primary);
}

[data-theme="dark"] .quick-btn {
    background: rgba(255,255,255,0.05);
    color: var(--text-primary);
}
</style>

<!-- Estadísticas Principales -->
<div class="stats-overview">
    <div class="stat-box blue">
        <div class="stat-icon"><i class="fas fa-users"></i></div>
        <div class="stat-number">156</div>
        <div class="stat-label">Usuarios Totales</div>
    </div>
    
    <div class="stat-box green">
        <div class="stat-icon"><i class="fas fa-user-injured"></i></div>
        <div class="stat-number">132</div>
        <div class="stat-label">Pacientes Activos</div>
    </div>
    
    <div class="stat-box orange">
        <div class="stat-icon"><i class="fas fa-user-md"></i></div>
        <div class="stat-number">24</div>
        <div class="stat-label">Terapeutas</div>
    </div>
    
    <div class="stat-box purple">
        <div class="stat-icon"><i class="fas fa-chart-line"></i></div>
        <div class="stat-number">85%</div>
        <div class="stat-label">Progreso Promedio</div>
    </div>
</div>

<!-- Tarjetas de Acción -->
<div class="action-cards">
    <div class="action-card" data-url="{{ url_for('admin_users') }}">
        <div class="action-card-header">
            <div class="action-card-icon icon-users">
                <i class="fas fa-users-cog"></i>
            </div>
            <div class="action-card-title">Gestión de Usuarios</div>
        </div>
        <div class="action-card-desc">
            Administra usuarios, roles y permisos del sistema
        </div>
        <div class="action-card-footer">
            <span class="action-badge">156 usuarios</span>
            <span class="action-arrow">→</span>
        </div>
    </div>
    
    <div class="action-card" data-url="{{ url_for('admin_therapists') }}">
        <div class="action-card-header">
            <div class="action-card-icon icon-therapists">
                <i class="fas fa-user-md"></i>
            </div>
            <div class="action-card-title">Terapeutas</div>
        </div>
        <div class="action-card-desc">
            Gestiona el equipo de terapeutas y sus especialidades
        </div>
        <div class="action-card-footer">
            <span class="action-badge">24 activos</span>
            <span class="action-arrow">→</span>
        </div>
    </div>
    
    <div class="action-card" data-url="{{ url_for('admin_patients') }}">
        <div class="action-card-header">
            <div class="action-card-icon icon-patients">
                <i class="fas fa-procedures"></i>
            </div>
            <div class="action-card-title">Pacientes</div>
        </div>
        <div class="action-card-desc">
            Monitorea el progreso y tratamientos de pacientes
        </div>
        <div class="action-card-footer">
            <span class="action-badge">132 activos</span>
            <span class="action-arrow">→</span>
        </div>
    </div>
    
    <div class="action-card" data-url="{{ url_for('admin_settings') }}">
        <div class="action-card-header">
            <div class="action-card-icon icon-settings">
                <i class="fas fa-cog"></i>
            </div>
            <div class="action-card-title">Configuración</div>
        </div>
        <div class="action-card-desc">
            Ajusta parámetros del sistema y preferencias
        </div>
        <div class="action-card-footer">
            <span class="action-badge">6 módulos</span>
            <span class="action-arrow">→</span>
        </div>
    </div>
    
    <div class="action-card" data-url="{{ url_for('admin_export_data') }}">
        <div class="action-card-header">
            <div class="action-card-icon icon-export">
                <i class="fas fa-download"></i>
            </div>
            <div class="action-card-title">Exportar Datos</div>
        </div>
        <div class="action-card-desc">
            Descarga reportes y datos del sistema en CSV
        </div>
        <div class="action-card-footer">
            <span class="action-badge">4 tipos</span>
            <span class="action-arrow">→</span>
        </div>
    </div>
    
    <div class="action-card" data-action="alert-reports">
        <div class="action-card-header">
            <div class="action-card-icon icon-reports">
                <i class="fas fa-chart-bar"></i>
            </div>
            <div class="action-card-title">Reportes Avanzados</div>
        </div>
        <div class="action-card-desc">
            Análisis detallado y métricas del sistema
        </div>
        <div class="action-card-footer">
            <span class="action-badge">Próximamente</span>
            <span class="action-arrow">→</span>
        </div>
    </div>
</div>

<!-- Acciones Rápidas -->
<div class="quick-actions">
    <div class="quick-actions-title">
        <i class="fas fa-bolt me-2"></i>Acciones Rápidas
    </div>
    <div class="quick-btn-grid">
        <button class="quick-btn" onclick="openNewUserModal()">
            <i class="fas fa-user-plus"></i>
            Nuevo Usuario
        </button>
        <button class="quick-btn" onclick="openBackupModal()">
            <i class="fas fa-database"></i>
            Backup Manual
        </button>
        <button class="quick-btn" onclick="openLogsModal()">
            <i class="fas fa-file-alt"></i>
            Ver Logs
        </button>
        <button class="quick-btn" onclick="openNotificationsModal()">
            <i class="fas fa-bell"></i>
            Notificaciones
        </button>
    </div>
</div>

<!-- Modal: Nuevo Usuario -->
<div class="modal fade" id="newUserModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-primary text-white">
                <h5 class="modal-title"><i class="fas fa-user-plus me-2"></i>Registrar Nuevo Usuario</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <form id="newUserForm">
                    <div class="mb-3">
                        <label class="form-label">Nombre de usuario</label>
                        <input type="text" class="form-control" id="newUsername" placeholder="usuario123" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Email</label>
                        <input type="email" class="form-control" id="newEmail" placeholder="usuario@ejemplo.com" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Contraseña</label>
                        <input type="password" class="form-control" id="newPassword" placeholder="••••••••" required>
                    </div>
                    <div class="mb-3">
                        <label class="form-label">Rol</label>
                        <select class="form-select" id="newRole" required>
                            <option value="">Seleccionar rol...</option>
                            <option value="admin">Administrador</option>
                            <option value="therapist">Terapeuta</option>
                            <option value="patient">Paciente</option>
                        </select>
                    </div>
                </form>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-primary" onclick="createUser()">
                    <i class="fas fa-save me-2"></i>Crear Usuario
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Backup Manual -->
<div class="modal fade" id="backupModal" tabindex="-1">
    <div class="modal-dialog">
        <div class="modal-content">
            <div class="modal-header bg-success text-white">
                <h5 class="modal-title"><i class="fas fa-database me-2"></i>Backup Manual del Sistema</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="alert alert-info">
                    <i class="fas fa-info-circle me-2"></i>
                    Se creará una copia de seguridad completa de la base de datos
                </div>
                <div class="mb-3">
                    <label class="form-label">Tipo de backup</label>
                    <select class="form-select" id="backupType">
                        <option value="full">Completo (Base de datos + archivos)</option>
                        <option value="db">Solo base de datos</option>
                        <option value="files">Solo archivos</option>
                    </select>
                </div>
                <div class="mb-3">
                    <label class="form-label">Descripción (opcional)</label>
                    <input type="text" class="form-control" id="backupDesc" placeholder="Backup antes de actualización...">
                </div>
                <div id="backupProgress" style="display:none">
                    <div class="progress">
                        <div class="progress-bar progress-bar-striped progress-bar-animated" style="width: 100%"></div>
                    </div>
                    <p class="text-center mt-2">Creando backup...</p>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">Cancelar</button>
                <button type="button" class="btn btn-success" onclick="createBackup()">
                    <i class="fas fa-download me-2"></i>Crear Backup
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Ver Logs -->
<div class="modal fade" id="logsModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-dark text-white">
                <h5 class="modal-title"><i class="fas fa-file-alt me-2"></i>Logs del Sistema</h5>
                <button type="button" class="btn-close btn-close-white" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="mb-3">
                    <div class="btn-group w-100" role="group">
                        <button class="btn btn-outline-primary active" onclick="filterLogs('all')">Todos</button>
                        <button class="btn btn-outline-success" onclick="filterLogs('info')">Info</button>
                        <button class="btn btn-outline-warning" onclick="filterLogs('warning')">Advertencias</button>
                        <button class="btn btn-outline-danger" onclick="filterLogs('error')">Errores</button>
                    </div>
                </div>
                <div id="logsContent" style="max-height: 400px; overflow-y: auto; background: #f8f9fa; padding: 15px; border-radius: 8px; font-family: monospace; font-size: 0.85rem;">
                    <div class="log-entry log-info">[2024-12-02 10:23:45] INFO: Sistema iniciado correctamente</div>
                    <div class="log-entry log-info">[2024-12-02 10:24:12] INFO: Usuario 'admin' inició sesión</div>
                    <div class="log-entry log-success">[2024-12-02 10:25:33] SUCCESS: Backup automático completado</div>
                    <div class="log-entry log-warning">[2024-12-02 10:26:01] WARNING: Uso de memoria al 75%</div>
                    <div class="log-entry log-info">[2024-12-02 10:27:15] INFO: Nueva sesión de terapia iniciada</div>
                    <div class="log-entry log-error">[2024-12-02 10:28:42] ERROR: Fallo en conexión con cámara #3</div>
                    <div class="log-entry log-info">[2024-12-02 10:29:10] INFO: Exportación de datos completada</div>
                    <div class="log-entry log-success">[2024-12-02 10:30:05] SUCCESS: Actualización de perfil exitosa</div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="downloadLogs()">
                    <i class="fas fa-download me-2"></i>Descargar Logs
                </button>
                <button type="button" class="btn btn-danger" onclick="clearLogs()">
                    <i class="fas fa-trash me-2"></i>Limpiar Logs
                </button>
            </div>
        </div>
    </div>
</div>

<!-- Modal: Notificaciones -->
<div class="modal fade" id="notificationsModal" tabindex="-1">
    <div class="modal-dialog modal-lg">
        <div class="modal-content">
            <div class="modal-header bg-warning text-dark">
                <h5 class="modal-title"><i class="fas fa-bell me-2"></i>Centro de Notificaciones</h5>
                <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
            </div>
            <div class="modal-body">
                <div class="notification-list">
                    <div class="notification-item unread">
                        <div class="notification-icon bg-primary"><i class="fas fa-user-plus"></i></div>
                        <div class="notification-content">
                            <strong>Nuevo usuario registrado</strong>
                            <p>Juan Pérez se ha registrado como paciente</p>
                            <small class="text-muted">Hace 5 minutos</small>
                        </div>
                    </div>
                    <div class="notification-item unread">
                        <div class="notification-icon bg-success"><i class="fas fa-check-circle"></i></div>
                        <div class="notification-content">
                            <strong>Sesión completada</strong>
                            <p>María García completó su sesión de rehabilitación</p>
                            <small class="text-muted">Hace 15 minutos</small>
                        </div>
                    </div>
                    <div class="notification-item">
                        <div class="notification-icon bg-warning"><i class="fas fa-exclamation-triangle"></i></div>
                        <div class="notification-content">
                            <strong>Mantenimiento programado</strong>
                            <p>El sistema estará en mantenimiento mañana a las 2:00 AM</p>
                            <small class="text-muted">Hace 1 hora</small>
                        </div>
                    </div>
                    <div class="notification-item">
                        <div class="notification-icon bg-info"><i class="fas fa-calendar"></i></div>
                        <div class="notification-content">
                            <strong>Citas pendientes</strong>
                            <p>Tienes 12 citas programadas para hoy</p>
                            <small class="text-muted">Hace 2 horas</small>
                        </div>
                    </div>
                </div>
            </div>
            <div class="modal-footer">
                <button type="button" class="btn btn-secondary" onclick="markAllRead()">
                    <i class="fas fa-check-double me-2"></i>Marcar todas como leídas
                </button>
                <button type="button" class="btn btn-primary" data-bs-dismiss="modal">Cerrar</button>
            </div>
        </div>
    </div>
</div>

<style>
.log-entry {
    padding: 8px;
    margin-bottom: 5px;
    border-left: 3px solid #ccc;
    background: white;
    border-radius: 4px;
}
.log-info { border-left-color: #0dcaf0; }
.log-success { border-left-color: #198754; }
.log-warning { border-left-color: #ffc107; }
.log-error { border-left-color: #dc3545; }

.notification-list {
    max-height: 400px;
    overflow-y: auto;
}

.notification-item {
    display: flex;
    gap: 15px;
    padding: 15px;
    border-bottom: 1px solid #e9ecef;
    transition: background 0.2s;
}

.notification-item:hover {
    background: #f8f9fa;
}

.notification-item.unread {
    background: #e7f3ff;
}

.notification-icon {
    width: 45px;
    height: 45px;
    border-radius: 50%;
    display: flex;
    align-items: center;
    justify-content: center;
    color: white;
    font-size: 1.2rem;
}

.notification-content {
    flex: 1;
}

.notification-content strong {
    display: block;
    margin-bottom: 5px;
}

.notification-content p {
    margin: 0;
    color: #6c757d;
    font-size: 0.9rem;
}
</style>

<!-- Gráfica de Actividad -->
<div class="chart-section">
    <div class="chart-title">
        <i class="fas fa-chart-area me-2"></i>Actividad del Sistema
    </div>
    <canvas id="activityChart" height="80"></canvas>
</div>

{% endblock %}

{% block extra_js %}
<script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
<script>
document.addEventListener('DOMContentLoaded', function() {
    // Manejar clicks en las tarjetas de acción
    document.querySelectorAll('.action-card').forEach(card => {
        card.addEventListener('click', function() {
            const url = this.dataset.url;
            const action = this.dataset.action;
            
            if (url) {
                window.location.href = url;
            } else if (action === 'alert-reports') {
                alert('Módulo de reportes en desarrollo');
            }
        });
    });
    
    const ctx = document.getElementById('activityChart').getContext('2d');
    
    new Chart(ctx, {
        type: 'line',
        data: {
            labels: ['Lun', 'Mar', 'Mié', 'Jue', 'Vie', 'Sáb', 'Dom'],
            datasets: [{
                label: 'Sesiones',
                data: [65, 78, 90, 81, 76, 55, 40],
                borderColor: '#667eea',
                backgroundColor: 'rgba(102, 126, 234, 0.1)',
                tension: 0.4,
                fill: true,
                pointBackgroundColor: '#667eea',
                pointBorderColor: '#fff',
                pointBorderWidth: 2,
                pointRadius: 5,
                pointHoverRadius: 7
            }]
        },
        options: {
            responsive: true,
            maintainAspectRatio: true,
            plugins: {
                legend: { display: false },
                tooltip: {
                    backgroundColor: 'rgba(0,0,0,0.8)',
                    padding: 12,
                    borderRadius: 8
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    grid: { color: 'rgba(0,0,0,0.05)' }
                },
                x: {
                    grid: { display: false }
                }
            }
        }
    });
});

// Funciones de los modales
function openNewUserModal() {
    const modal = new bootstrap.Modal(document.getElementById('newUserModal'));
    modal.show();
}

function openBackupModal() {
    const modal = new bootstrap.Modal(document.getElementById('backupModal'));
    modal.show();
}

function openLogsModal() {
    const modal = new bootstrap.Modal(document.getElementById('logsModal'));
    modal.show();
}

function openNotificationsModal() {
    const modal = new bootstrap.Modal(document.getElementById('notificationsModal'));
    modal.show();
}

// Crear nuevo usuario
function createUser() {
    const username = document.getElementById('newUsername').value;
    const email = document.getElementById('newEmail').value;
    const password = document.getElementById('newPassword').value;
    const role = document.getElementById('newRole').value;
    
    if (!username || !email || !password || !role) {
        alert('⚠️ Por favor completa todos los campos');
        return;
    }
    
    // Simular creación
    const btn = event.target;
    btn.innerHTML = '<i class="fas fa-spinner fa-spin me-2"></i>Creando...';
    btn.disabled = true;
    
    setTimeout(() => {
        alert('✅ Usuario "' + username + '" creado exitosamente como ' + role);
        bootstrap.Modal.getInstance(document.getElementById('newUserModal')).hide();
        document.getElementById('newUserForm').reset();
        btn.innerHTML = '<i class="fas fa-save me-2"></i>Crear Usuario';
        btn.disabled = false;
    }, 1500);
}

// Crear backup
function createBackup() {
    const type = document.getElementById('backupType').value;
    const desc = document.getElementById('backupDesc').value;
    
    const btn = event.target;
    const progress = document.getElementById('backupProgress');
    
    btn.disabled = true;
    progress.style.display = 'block';
    
    setTimeout(() => {
        progress.style.display = 'none';
        alert('✅ Backup ' + type + ' creado exitosamente!\n' + (desc || 'Sin descripción'));
        bootstrap.Modal.getInstance(document.getElementById('backupModal')).hide();
        btn.disabled = false;
    }, 3000);
}

// Filtrar logs
function filterLogs(type) {
    const entries = document.querySelectorAll('.log-entry');
    document.querySelectorAll('#logsModal .btn-group button').forEach(b => b.classList.remove('active'));
    event.target.classList.add('active');
    
    entries.forEach(entry => {
        if (type === 'all') {
            entry.style.display = 'block';
        } else {
            entry.style.display = entry.classList.contains('log-' + type) ? 'block' : 'none';
        }
    });
}

// Descargar logs
function downloadLogs() {
    alert('📥 Descargando logs del sistema...\nArchivo: system_logs_' + new Date().toISOString().split('T')[0] + '.txt');
}

// Limpiar logs
function clearLogs() {
    if (confirm('⚠️ ¿Estás seguro de que deseas limpiar todos los logs?')) {
        document.getElementById('logsContent').innerHTML = '<p class="text-center text-muted">No hay logs disponibles</p>';
        alert('✅ Logs limpiados correctamente');
    }
}

// Marcar notificaciones como leídas
function markAllRead() {
    document.querySelectorAll('.notification-item.unread').forEach(item => {
        item.classList.remove('unread');
    });
    alert('✅ Todas las notificaciones marcadas como leídas');
}
</script>
{% endblock %}
